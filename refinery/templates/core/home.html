{% extends "base.html" %}

{% block title %}
{{ block.super }} - Home
{% endblock %}

{% block subheader %}
<div class="page-header">
  <h1>Launch Pad
	{% if user.is_authenticated  %}
		<small>{{ user.first_name }} {{ user.last_name }}</small>
	{% endif %} 
	</h1>
</div>
{% endblock %}

{% block content %}
{% if users %}
	<!-- only super users get to see this -->
	<h2>Users ({{ users|length}})</h2> 
    <ul>
    {% for user in users %}
        <li><a href="users/{{ user.username }}">{{ user.username }}</a>: {{ user.first_name }} {{ user.last_name }} ({{ user.get_profile.affiliation }}): {{ user.email }}</li>
    {% endfor %}
    </ul>
{% endif %}

<div class="row-fluid">
 <div class="span4">
 		
<h2>Projects</h2>

{% if projects or unassigned_analyses %}

<table class="table table-striped table-condensed">
	<thead>
		<tr>
			<th>
				Name
			</th>    
			<th>
				Analyses
			</th>    
		</tr>
	</thead>
	<tbody>
		
	{% if unassigned_analyses %}
		{% if unassigned_analyses.all|length > 0 %}
		    <tr>
		    	<td>
		        	<i class="icon-exclamation-sign"></i> Unassigned Analyses
		        </td>
		    	<td>
		        	{{unassigned_analyses.all|length}}
		        </td>
		    </tr>
			{% for analysis in unassigned_analyses.all %}
			    <tr>
			    	<td>
			    		<i class="icon-empty"></i> <a href="projects/{{ user.get_profile.catch_all_project.uuid }}/analyses/{{ analysis.uuid }}">{{ analysis.name }}</a>
			    	</td>
			    	<td>
			    		<a href="analysis_manager/{{ analysis.uuid }}">Status</a>
			    	</td>
			    </tr>
			{% endfor %}	
		{% endif %}
	{% endif %}

    {% for project in projects %}
    <tr>
    	<td>
        	<i class="icon-folder-open"></i> <a href="projects/{{ project.uuid }}">{{ project.name }}</a>
        </td>
    	<td>
        {{project.analyses.all|length}}
        </td>
    </tr>
		{% for analysis in project.analyses.all %}
		    <tr>
		    	<td>
		    		<i class="icon-empty"></i> <a href="projects/{{ project.uuid }}/analyses/{{ analysis.uuid }}">{{ analysis.name }}</a> - {{analysis.summary}}
		    	</td>
			    <td>
			    		<a href="">Status</a>
			    </td>
		    </tr>
		{% endfor %}
    {% endfor %}
		
	</tbody>
</table>
{% else %}

	<div class="alert alert-info">
		No projects available.  
	</div>
{% endif %}

<a class="btn" href={% url project_new %}>New Project</a> 


</div>
<div class="span4">

	<h2>Workflows</h2>
	
{% if workflows %}
	<table class="table table-striped table-condensed">
		<thead>
			<tr>
				<th>
					Name
				</th>    
			</tr>
		</thead>
		<tbody>
		{% for workflow in workflows %}
        <tr>
        	<td>
        		<i class="icon-cog"></i> <a href="workflows/{{ workflow.uuid }}">{{ workflow.name }}</a>
        	</td>
        </tr>
    	{% endfor %}
		</tbody>		
	</table>
{% else %}
	<div class="alert alert-info">
		No workflows available.  
	</div>
{% endif %}
	
	 <!--
{% if workflow_engines %}

	<table class="table table-striped table-condensed table-bordered">
		<thead>
			<tr>
				<th>
					Name
				</th>    
				<th>
					Workflows
				</th>    
			</tr>
		</thead>
		<tbody>
    {% for workflow_engine in workflow_engines %}
        <tr>
        	<td>
				<i class="icon-cog"></i> Engine <a href="workflow_engines/{{ workflow_engine.uuid }}">{{ workflow_engine.name }}</a>        		
        	</td>
        	<td>
        		{{workflow_engine.workflow_set.all|length}}
        	</td>
        </tr>

		{% for workflow in workflow_engine.workflow_set.all %}
        <tr>
        	<td colspan="2">
        		<i class="icon-empty"></i> <a href="workflows/{{ workflow.uuid }}">{{ workflow.name }}</a>
        	</td>
        </tr>
    	{% endfor %}

    {% endfor %}
		</tbody>		
	</table>
{% else %}
	<div class="alert alert-info">
		No workflows available.  
	</div>
{% endif %}
	-->

</div>

<div class="span4">

<h2><a href="data_sets/">Data Sets</a></h2>
{% if data_sets %}	
	<table class="table table-striped table-condensed">
		<thead>
			<tr>
				<th>
					Name
				</th>    
				<!--
				<th>
					Owner
				</th>
				-->    
			</tr>
		</thead>
		<tbody>
    {% for data_set in data_sets %}
        <tr>
        	<td>
				<i class="icon-file"></i> <a href="data_sets/{{ data_set.uuid }}">{{ data_set.name }}</a>        		
        	</td>
        </tr>

    {% endfor %}
		</tbody>		
	</table>
	 
{% else %}
	<div class="alert alert-info">
		No data sets available.  
	</div>
{% endif %}

<a class="btn" href={% url import_isa_tab %}>New Data Set</a> 
</div>


</div>
{% endblock %}
