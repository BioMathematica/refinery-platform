{% extends "base.html" %}

{% block title %}
{{ block.super }} - Home
{% endblock %}

{% block subheader %}
Contents
{% endblock %}

{% block content %}
{% if users %}
	{{ users|length }} users 
    <ul>
    {% for user in users %}
        <li><a href="user/{{ user.get_profile.uuid }}">{{ user.username }}</a>: {{ user.first_name }} {{ user.last_name }} ({{ user.get_profile.affiliation }}): {{ user.email }}</li>
    {% endfor %}
    </ul>
{% else %}
    <p>No users available.</p>
{% endif %}

{% if projects %}
	{{ projects|length }} projects 
    <ul>
    {% for project in projects %}
        <li><a href="project/{{ project.uuid }}">{{ project.name }}</a>: {{ project.summary }} ({{ project.get_visibility_display }}; members: {{ project.users.all|length }})</li>
    {% endfor %}
    </ul>
{% else %}
    <p>No projects available.</p>
{% endif %}

{% if workflows %}
	{{ workflows|length }} workflows 
    <ul>
    {% for workflow in workflows %}
        <li>{{ workflow.name }}: {{ workflow.summary }} ({{ workflow.get_visibility_display }}; members: {{ workflow.users.all|length }})
		    <ol>
			{% for data_input in workflow.data_inputs.all %}
			    <li>{{ data_input.name }} ({{ data_input.internal_id }})</li>
			{% endfor %}
			</ol>
		</li>
    {% endfor %}
    </ul>
{% else %}
    <p>No workflows available.</p>
{% endif %}

{% if data_sets %}
	{{ data_sets|length }} data sets 
    <ul>
    {% for data_set in data_sets %}
        <li><a href="data_set/{{ data_set.uuid }}">{{ data_set.name }}</a>: {{ data_set.summary }} ({{ data_set.get_visibility_display }}; members: {{ data_set.users.all|length }})</li>
    {% endfor %}
    </ul>
{% else %}
    <p>No data sets available.</p>
{% endif %}

{% if analyses %}
	{{ analyses|length }} analyses 
    <ul>
    {% for analysis in analyses %}
        <li>{{  analysis.name }}: {{ analysis.summary }}
        	<ul>
				<li><i>Project</i>: {{ analysis.project.name }}</li>
				<li><i>Workflow</i>: {{ analysis.workflow.name }}
					<ul>
					    {% for map in analysis.workflow_data_input_maps.all %}
					    	<li>{{ map }}</li>
					    {% endfor %}						
					</ul>
				</li>				
				<li><i>Data Set</i>: {{ analysis.data_set.name }}</li>        		
        	</ul>
    	</li>
    {% endfor %}
    </ul>
{% else %}
    <p>No analyses available.</p>
{% endif %}




{% endblock %}
