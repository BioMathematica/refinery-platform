{% extends "base.html" %}

{% block title %}
{{ block.super }} - Statistics
{% endblock %}

{% block subheader %}
<div class="page-header">
	<h1>
  		Statistics <small>{{ base_url }}</small>
	</h1>
</div>
{% endblock %}

{% block content %}
<div class="refinery-panel refinery-panel-content scrollable">
	<div class="row-fluid">
		<div class="span4 well">
			<h1>{{ users }}</h1><h3>users</h3>
		</div>
		<div class="span4 well">
			<h1>{{ groups }}</h1><h3>groups</h3>
		</div>
		<div class="span4 well">
			<h1>{{ projects }}</h1><h3>projects</h3>
		</div>
	</div>
	<div class="row-fluid">
		<div class="span4 well">
			<h1>{{ data_sets }}</h1><h3>data sets</h3>
		</div>
		<div class="span4 well">
			<h1>{{ workflows }}</h1><h3>workflows</h3>
		</div>
		<div class="span4 well">
			<h1>{{ files }}</h1><h3>files</h3>
		</div>
	</div>

  <div id="chart"></div>
</div>
{% endblock %}

{% block script %}
<script type="text/javascript" src="/static/vendor/d3/d3.min.js"></script>
<script type="text/javascript" src="/static/vendor/refinery-utility-visualization/rfnry.vis.util.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $.get("http://192.168.50.50:8000/more_statistics/", function (response) {
            var data = JSON.parse(response).data;
            var config = {
                height: 400,
                width: $(document).width(),
                drawTarget: "chart",
                orientation: "vertical"
            };
            rfnry.vis.util.draw("simple", config, data);    
        });
    });
</script>
{% endblock %}
