{% extends "base.html" %}

{% block head_html %}
<!-- <link href="{{ STATIC_URL }}js/bootstrap/css/bootstrap-combobox.css" rel="stylesheet"> -->
<!-- <script language="javascript" type="text/javascript" src="{{ STATIC_URL }}js/bootstrap/js/bootstrap-combobox.js"></script> -->
<script language="javascript" type="text/javascript" src="http://fgnass.github.com/spin.js/dist/spin.min.js"></script>
<script language="javascript" type="text/javascript">
    var opts = {
    lines: 13, // The number of lines to draw
    length: 5, // The length of each line
    width: 3, // The line thickness
    radius: 10, // The radius of the inner circle
    corners: 1, // Corner roundness (0..1)
    rotate: 0, // The rotation offset
    color: '#000', // #rgb or #rrggbb
    speed: 1, // Rounds per second
    trail: 60, // Afterglow percentage
    shadow: false, // Whether to render a shadow
    hwaccel: false, // Whether to use hardware acceleration
    className: 'spinner', // The CSS class to assign to the spinner
    zIndex: 2e9, // The z-index (defaults to 2000000000)
    top: 'auto', // Top position relative to parent in px
    left: 'auto' // Left position relative to parent in px
    };
</script>
{% endblock %}

{% block subheader %}
<div class="page-header">
  	<h1>ISA-Tab Importer <small id="import-message"></small></h1>
</div>
{% endblock %}

{% block content %}
<form id="isaTabImportForm" enctype="multipart/form-data" action="" method="post">{% csrf_token %}
	<div id="import-errors" class="alert alert-error">
	<p>{{ error }}</p>
	<p>{{ form.non_field_errors }}</p>
	</div>
	<div>
		<p>Upload file from disk:</p>
		<p>
			{{ form.isa_tab_file.errors}}
			{{ form.isa_tab_file }}
		</p>
		<p>Or download from a URL:</p>
		<p>
			{{ form.isa_tab_url.errors }}
			{{ form.isa_tab_url }}
		</p>
	</div>
	<input id="import-button" type="submit" value="Import"/>
	<span style="display: inline;" id="spinner"></span>
</form>
{% endblock %}

{% block script %}
	<script language="javascript" type="text/javascript">    	
    	$("#import-button").on( "click", function() {
    		$("#import-errors").html( "")
    		var target = document.getElementById('spinner');    
    		var spinner = new Spinner(opts).spin(target);
    		$("#import-message").html( "Running ...")
    	});
	</script>
{% endblock %}
