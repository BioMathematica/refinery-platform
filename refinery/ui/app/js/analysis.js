/*! refinery-platform-ui 2015-06-16 */

angular.module("refineryAnalysis",[]).controller("AnalysisCtrl",["$scope","$rootScope","$http","$window","$log","$timeout","workflow",function(a,b,c,d,e,f,g){"use strict";a.analysisConfig={studyUuid:d.externalStudyUuid,workflowUuid:null,nodeSetUuid:null,nodeRelationshipUuid:null},a.$onRootScope("nodeSetChangedEvent",function(b,c){a.analysisConfig.nodeSetUuid=c.uuid,a.analysisConfig.nodeRelationshipUuid=null,e.debug("new nodeset: "+a.analysisConfig.nodeSetUuid)}),a.$onRootScope("nodeRelationshipChangedEvent",function(b,c){c?(a.analysisConfig.nodeRelationshipUuid=c.uuid,e.debug("new noderel: "+a.analysisConfig.nodeRelationshipUuid)):(a.analysisConfig.nodeRelationshipUuid=null,e.debug("new noderel undefined")),a.analysisConfig.nodeSetUuid=null}),a.launchAnalysis=function(){a.analysisConfig.workflowUuid=g.getUuid(),c({method:"POST",url:"/analysis_manager/run/",headers:{"X-Requested-With":"XMLHttpRequest"},data:a.analysisConfig}).success(function(b){e.debug("Launching analysis with config:"),e.debug("Workflow: "+a.analysisConfig.workflowUuid),e.debug("NodeSET: "+a.analysisConfig.nodeSetUuid),e.debug("NodeREL: "+a.analysisConfig.nodeRelationshipUuid),d.location.assign(b)}).error(function(a,b){e.debug("Request failed: error "+b)})}}]);
//# sourceMappingURL=analysis.js.map