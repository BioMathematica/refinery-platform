/*! refinery-platform-ui 2015-06-16 */

function externalToolStatusFactory(a){"use strict";var b="/api/v1/externaltoolstatus/",c=[{name:"SOLR",status:"N/A",last_time_check:"N/A",is_active:"N/A"},{name:"CELERY",status:"N/A",last_time_check:"N/A",is_active:"N/A"},{name:"GALAXY",status:"N/A",last_time_check:"N/A",is_active:"N/A"}],d={},e=function(){return a.get(b).then(function(a){f(a.data.objects)},function(a){d=void 0,$log.error("Error accessing external tool status API.")})},f=function(a){for(var b=0;b<a.length;++b)g(a[b]),d[a[b].name]={};for(b=0;b<a.length;++b)d[a[b].name][a[b].unique_instance_identifier]=a[b].status},g=function(a){switch(a.name){case"SOLR":h(0,a);break;case"CELERY":h(1,a);break;case"GALAXY":h(2,a);break;default:console.log("Additional external tools data available: "+a)}},h=function(a,b){c[a].status=b.status,c[a].last_time_check=b.last_time_check,c[a].is_active=b.is_active},i=function(){return d?d.SOLR?"SUCCESS"===d.SOLR[null]:!1:void 0},j=function(){return d?d.CELERY?"SUCCESS"===d.CELERY[null]:!1:void 0},k=function(){if(!d)return void 0;if(!d.GALAXY)return!1;for(var a in d.GALAXY)if(d.GALAXY.hasOwnProperty(a)&&"SUCCESS"!==d.GALAXY[a])return!1;return!0},l=function(a){return d?d.GALAXY?"SUCCESS"===d.GALAXY[a]:!1:void 0},m=function(){return d?j()?i()&&k()?"OK":"WARNING":"ERROR":"UNKNOWN"};return{tools:d,toolsDetails:c,getTools:e,getSystemStatus:m,isCeleryUp:j,isGalaxyUp:k,isSolrUp:i,isGalaxyInstanceUp:l,setWhichTool:g,processResponse:f}}angular.module("refineryExternalToolStatus").factory("externalToolStatusFactory",["$http",externalToolStatusFactory]);
//# sourceMappingURL=external-tool-status-factory.js.map