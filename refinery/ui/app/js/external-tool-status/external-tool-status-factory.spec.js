/*! refinery-platform-ui 2015-06-16 */

describe("External Tool Status Factory",function(){var a;beforeEach(angular.mock.module("refineryExternalToolStatus")),beforeEach(angular.mock.inject(function(b){a=b})),it("factory and tools variables should exist",function(){expect(a).toBeDefined(),expect(a.toolsDetails).toEqual([{name:"SOLR",status:"N/A",last_time_check:"N/A",is_active:"N/A"},{name:"CELERY",status:"N/A",last_time_check:"N/A",is_active:"N/A"},{name:"GALAXY",status:"N/A",last_time_check:"N/A",is_active:"N/A"}]),expect(a.tools).toEqual({})}),it("processResponse method should process a response into an object with names and object statuses",function(){var b=[{is_active:!0,last_time_check:"2015-06-03T17:00:35.624156",name:"SOLR",resource_uri:"/api/v1/externaltoolstatus/2/",status:"SUCCESS",unique_instance_identifier:null},{is_active:!0,last_time_check:"2015-06-03T17:00:36.641569",name:"CELERY",resource_uri:"/api/v1/externaltoolstatus/1/",status:"SUCCESS",unique_instance_identifier:null}];a.processResponse(b),expect(a.tools).toEqual({SOLR:{"null":"SUCCESS"},CELERY:{"null":"SUCCESS"}}),it("isSolrup, isCeleryUp, and isGalaxyUp should respond accordingly.",function(){expect(a.isSolrUp()).toEqual("tools.SOLR[null]==='SUCCESS'"),expect(a.isCeleryUp()).toEqual("tools.CELERY[null]==='SUCCESS'"),expect(a.isGalaxyUp()).toEqual("true"),a.tools.pop(),expect(a.isSolrUp()).toEqual(!1),a.tools.pop(),expect(a.isCeleryUp()).toEqual(!1),a.tools.pop(),expect(a.isGalaxyUp()).toEqual(!1)})}),it("getSystemStatus should return overall status according to isToolUp methods.",function(){var b=[{is_active:!0,last_time_check:"2015-06-03T17:00:35.624156",name:"SOLR",resource_uri:"/api/v1/externaltoolstatus/2/",status:"SUCCESS",unique_instance_identifier:null},{is_active:!0,last_time_check:"2015-06-03T17:00:36.641569",name:"CELERY",resource_uri:"/api/v1/externaltoolstatus/1/",status:"SUCCESS",unique_instance_identifier:null},{is_active:!0,last_time_check:"2015-06-03T17:00:36.641569",name:"GALAXY",resource_uri:"/api/v1/externaltoolstatus/1/",status:"SUCCESS",unique_instance_identifier:null}];a.processResponse(b),expect(a.getSystemStatus()).toEqual("OK"),a.tools.CELERY=null,expect(a.getSystemStatus()).toEqual("ERROR"),a.tools.CELERY={"null":"SUCCESS"},a.tools.SOLR=null,expect(a.getSystemStatus()).toEqual("WARNING"),a.tools.SOLR={"null":"SUCCESS"},a.tools.GALAXY=null,expect(a.getSystemStatus()).toEqual("WARNING")}),it("setWhichTool should sort toolData by name",function(){for(var b=a.toolsDetails,c=[{name:"CELERY",status:"FAIL",last_time_check:"2014-12-17T03:24:00",is_active:"N/A"},{name:"GALAXY",status:"SUCCESS",last_time_check:"2014-12-17T03:24:00",is_active:"N/A"},{name:"SOLR",status:"SUCCESS",last_time_check:"2014-12-17T03:24:00",is_active:"N/A"}],d=0;d<c.length;d++)a.setWhichTool(c[d]);expect(b).toEqual([{name:"SOLR",status:"SUCCESS",last_time_check:"2014-12-17T03:24:00",is_active:"N/A"},{name:"CELERY",status:"FAIL",last_time_check:"2014-12-17T03:24:00",is_active:"N/A"},{name:"GALAXY",status:"SUCCESS",last_time_check:"2014-12-17T03:24:00",is_active:"N/A"}])})});
//# sourceMappingURL=external-tool-status-factory.spec.js.map