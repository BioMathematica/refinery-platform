<div class="row-fluid analysis-header">
  <div class="span1 analysis-icon"></div>
  <div class="span4 analysis-name">
    <strong>Name</strong>
  </div>
   <div class="span1">
    <strong>Status</strong>
  </div>
  <div class="span2">
    <strong>Start Time</strong>
  </div>
  <div class="span2">
    <strong>End Time</strong>
  </div>
  <div class="span2">
  </div>


<ul class="analysesList">
    <li class="analysesListItems" ng-repeat="analysis in AnalysesCtrl.analysesList track by analysis.uuid">
       <div class="row-fluid">
        <div class="span1 analysis-icon">
         <span class="spinner"><i class="{{analysis.status | analysesStatusIcon}} analyses-status"></i>
         </span>
        </div>

        <div class="span4 analysis-name">
          <span ng-switch on="analysis.status">
              <span ng-switch-when="UNKNOWN">
                 {{ analysis.name }}
              </span>
            <span ng-switch-default>
                <a ng-href="/data_sets/{{analysis.data_set__uuid}}/analysis/{{analysis.uuid}}">
                  {{ analysis.name }}
                </a>
            </span>
          </span>
        </div>


        <div class="span1">
          {{ analysis.status }}
        </div>

         <div class="span2">
          {{analysis.time_start | date: 'medium'}}
         </div>

         <div class="span2">
         {{analysis.time_end | date: 'medium'}}
         </div>

         <div class="span2"></div>

        <span ng-if="analysis.status=='RUNNING' || analysis.status=='INITIALIZED'">

         <div class="span1 analysis-cancel">
            <a rp-analyses-cancel-confirm confirmed-click="AnalysesCtrl
            .cancelAnalysis(analysis.uuid)" rp-analyses-cancel-tooltip>
              <i class="icon-remove"></i>
            </a>
            &nbsp;
            <a ng-click="isCollapsed = !isCollapsed" data-toggle="collapse"
               data-target="#{{analysis.uuid}}">
              <i ng-class="{'icon-collapse': isCollapsed, 'icon-collapse-top':
              !isCollapsed}"></i>
            </a>
          </div>
          <div class="span11">
            <span ng-if="AnalysesCtrl.analysesDetail[analysis.uuid].cancelingAnalyses == true">
              <div class="alert alert-danger" id="analyses-cancel-notice">
                Canceling Analysis in Progress
              </div>
            </span>

            <div id="{{analysis.uuid}}" class="collapse in">

              <div ng-hide="AnalysesCtrl.isAnalysisDetailLoaded(analysis.uuid)"
                class="ng-hide">
                <div class = "analysis-retrieving">
                   <span class="refinery-spinner analyses-view"></span>
                  &nbsp;Retrieving analysis details.
                 </div>
              </div>

              <div ng-show="AnalysesCtrl.isAnalysisDetailLoaded(analysis.uuid)">
                <ul class="analysisRunningList">
                  <li class="analysisRunningListItem">
                    Input File Import
                    <span rp-analyses-input-tooltip>
                      <i class="icon-question-sign"></i>
                    </span>
                    <div ng-switch on="AnalysesCtrl.analysesDetail[analysis.uuid]
                    .preprocessing">
                      <div ng-switch-when="SUCCESS">
                        <div class="alert alert-success">
                          {{ AnalysesCtrl.analysesDetail[analysis.uuid].preprocessing }}
                        </div>
                      </div>
                      <div ng-switch-when="RETRY">
                        <div class="progress progress-striped active">
                          <div class="bar" id="preprocessing-
                        {{ analysis.uuid }}" style="width:
                          {{AnalysesCtrl.analysesDetail[analysis.uuid]
                          .executionPercentDone}}">{{AnalysesCtrl.analysesDetail[analysis.uuid]
                          .preprocessingPercentDone}}</div>
                        </div>
                      </div>
                      <div ng-switch-when="FAILURE">
                        <div class="alert alert-warning">
                          {{ AnalysesCtrl.analysesDetail[analysis.uuid].preprocessing }}
                          </div>
                      </div>
                      <div ng-switch-default>
                        <div class="alert alert-info">
                          PENDING
                        </div>
                      </div>
                    </div>
                  </li>

                  <li class="analysisRunningListItem">
                    Execution
                    <span rp-analyses-execution-tooltip>
                      <i class="icon-question-sign"></i>
                    </span>
                    <div ng-switch on="AnalysesCtrl.analysesDetail[analysis.uuid].execution">
                      <div ng-switch-when="SUCCESS">
                        <div class="alert alert-success">
                          {{ AnalysesCtrl.analysesDetail[analysis.uuid].execution }}
                        </div>
                      </div>
                      <div ng-switch-when="RETRY">
                        <div class="progress progress-striped active">
                          <div class="bar" id="execution-{{ analysis.uuid }}" style="width:{{AnalysesCtrl.analysesDetail[analysis.uuid]
                          .executionPercentDone}}">
                            {{AnalysesCtrl.analysesDetail[analysis.uuid].executionPercentDone}}
                          </div>
                        </div>
                      </div>
                      <div ng-switch-when="FAILURE">
                        <div class="alert alert-warning">
                          {{ AnalysesCtrl.analysesDetail[analysis.uuid].execution }}
                          </div>
                      </div>
                      <div ng-switch-default>
                        <div class="alert alert-info">
                          PENDING
                        </div>
                      </div>
                    </div>
                  </li>

                  <li class="analysisRunningListItem">
                    Output File Import
                    <span rp-analyses-output-tooltip>
                      <i class="icon-question-sign"></i>
                    </span>
                    <div ng-switch on="AnalysesCtrl.analysesDetail[analysis.uuid].postprocessing">
                      <div ng-switch-when="SUCCESS">
                        <div class="alert alert-success">
                          {{ AnalysesCtrl.analysesDetail[analysis.uuid].postprocessing }}
                        </div>
                      </div>
                      <div ng-switch-when="FAILURE">
                        <div class="alert alert-warning">
                          {{ AnalysesCtrl.analysesDetail[analysis.uuid].postprocessing }}
                        </div>
                      </div>
                      <div ng-switch-when="RETRY">
                        <div class="progress progress-striped active">
                          <div class="bar" id="postprocessing-
                        {{ analysis.uuid }}" style="width:
                          {{AnalysesCtrl.analysesDetail[analysis.uuid]
                          .executionPercentDone}}">{{AnalysesCtrl.analysesDetail[analysis.uuid]
                          .postprocessingPercentDone}}</div>
                        </div>
                      </div>
                       <div ng-switch-default>
                        <div class="alert alert-info">
                          PENDING
                        </div>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </span>
      </div>
    </li>
  </ul>
</div>
</div>
